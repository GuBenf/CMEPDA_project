<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.12.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>CMEPDA Project: sim/sim.cc File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">CMEPDA Project
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.12.0 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() { codefold.init(0); });
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search',false);
  $(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function(){ initResizable(false); });
/* @license-end */
</script>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_4fedf3bc7458de691f44ea68a2cf9143.html">sim</a></li>  </ul>
</div>
</div><!-- top -->
<div id="doc-content">
<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle"><div class="title">sim.cc File Reference</div></div>
</div><!--header-->
<div class="contents">

<p>Main file of the Geant4 project.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &lt;iostream&gt;</code><br />
<code>#include &quot;G4AnalysisManager.hh&quot;</code><br />
<code>#include &quot;G4RunManager.hh&quot;</code><br />
<code>#include &quot;G4UImanager.hh&quot;</code><br />
<code>#include &quot;G4VisManager.hh&quot;</code><br />
<code>#include &quot;G4VisExecutive.hh&quot;</code><br />
<code>#include &quot;G4UIExecutive.hh&quot;</code><br />
<code>#include &quot;<a class="el" href="construction_8hh_source.html">construction.hh</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="physics_8hh_source.html">physics.hh</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="action_8hh_source.html">action.hh</a>&quot;</code><br />
</div><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a3c04138a5bfe5d72780bb7e82a18e627" id="r_a3c04138a5bfe5d72780bb7e82a18e627"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a3c04138a5bfe5d72780bb7e82a18e627">main</a> (int argc, char **argv)</td></tr>
<tr class="memdesc:a3c04138a5bfe5d72780bb7e82a18e627"><td class="mdescLeft">&#160;</td><td class="mdescRight">Main entry point for the Geant4 simulation.  <br /></td></tr>
<tr class="separator:a3c04138a5bfe5d72780bb7e82a18e627"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Main file of the Geant4 project. </p>
<p>This program uses the Geant4 framework to run a particle simulation, visualize the results, and log data to an output file. The simulation is configured to be run via a user interface (UI) with a 3D graphical view of the results. Additionally, simulation data is collected and written to a .root file.</p>
<dl class="section author"><dt>Author</dt><dd>Benfratello G., Niccolai A. </dd></dl>
<dl class="section date"><dt>Date</dt><dd>2024-12-05 </dd></dl>
<dl class="section version"><dt>Version</dt><dd>1.0 </dd></dl>
</div><h2 class="groupheader">Function Documentation</h2>
<a id="a3c04138a5bfe5d72780bb7e82a18e627" name="a3c04138a5bfe5d72780bb7e82a18e627"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3c04138a5bfe5d72780bb7e82a18e627">&#9670;&#160;</a></span>main()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int main </td>
          <td>(</td>
          <td class="paramtype">int</td>          <td class="paramname"><span class="paramname"><em>argc</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char **</td>          <td class="paramname"><span class="paramname"><em>argv</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Main entry point for the Geant4 simulation. </p>
<p>This function initializes the Geant4 framework, sets up the user interface, and begins the simulation. It configures random number generation, initializes the simulation environment, and sets up visualization commands. It also opens the output file for data logging and runs the simulation for 100,000 events.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">argc</td><td>Argument count from the command line. </td></tr>
    <tr><td class="paramname">argv</td><td>Argument values from the command line. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Integer exit status. </dd></dl>
<div class="fragment"><div class="line"><span class="lineno">   38</span>{</div>
<div class="line"><span class="lineno">   39</span>  <span class="comment">// Initialize random engine</span></div>
<div class="line"><span class="lineno">   40</span>  G4Random::setTheEngine(<span class="keyword">new</span> CLHEP::RanecuEngine);</div>
<div class="line"><span class="lineno">   41</span>  G4long seed = time(NULL);</div>
<div class="line"><span class="lineno">   42</span>  G4Random::setTheSeed(seed);</div>
<div class="line"><span class="lineno">   43</span>  </div>
<div class="line"><span class="lineno">   44</span>  <span class="comment">// Initialize Geant4 framework</span></div>
<div class="line"><span class="lineno">   45</span>  G4RunManager *runManager = <span class="keyword">new</span> G4RunManager();</div>
<div class="line"><span class="lineno">   46</span>  runManager-&gt;SetUserInitialization(<span class="keyword">new</span> <a class="code hl_class" href="class_my_detector_construction.html">MyDetectorConstruction</a>());</div>
<div class="line"><span class="lineno">   47</span>  runManager-&gt;SetUserInitialization(<span class="keyword">new</span> <a class="code hl_class" href="class_my_physics_list.html">MyPhysicsList</a>());</div>
<div class="line"><span class="lineno">   48</span>  runManager-&gt;SetUserInitialization(<span class="keyword">new</span> <a class="code hl_class" href="class_my_action_initialization.html">MyActionInitialization</a>());</div>
<div class="line"><span class="lineno">   49</span>  runManager-&gt;Initialize();</div>
<div class="line"><span class="lineno">   50</span> </div>
<div class="line"><span class="lineno">   51</span>  <span class="comment">// Initialize user interface and visualization</span></div>
<div class="line"><span class="lineno">   52</span>  G4UIExecutive *ui = <span class="keyword">new</span> G4UIExecutive(argc, argv);</div>
<div class="line"><span class="lineno">   53</span>  G4VisManager *visManager = <span class="keyword">new</span> G4VisExecutive();</div>
<div class="line"><span class="lineno">   54</span>  visManager-&gt;Initialize();</div>
<div class="line"><span class="lineno">   55</span>  G4UImanager *UImanager = G4UImanager::GetUIpointer();</div>
<div class="line"><span class="lineno">   56</span> </div>
<div class="line"><span class="lineno">   57</span>  <span class="comment">// Set visualization commands</span></div>
<div class="line"><span class="lineno">   58</span>  UImanager-&gt;ApplyCommand(<span class="stringliteral">&quot;/vis/open OGL&quot;</span>);</div>
<div class="line"><span class="lineno">   59</span>  UImanager-&gt;ApplyCommand(<span class="stringliteral">&quot;/vis/viewer/set/viewpointVector 1. 1. 1.&quot;</span>);</div>
<div class="line"><span class="lineno">   60</span>  UImanager-&gt;ApplyCommand(<span class="stringliteral">&quot;/vis/drawVolume&quot;</span>);</div>
<div class="line"><span class="lineno">   61</span>  UImanager-&gt;ApplyCommand(<span class="stringliteral">&quot;/vis/viewer/set/autoRefresh true&quot;</span>);</div>
<div class="line"><span class="lineno">   62</span>  UImanager-&gt;ApplyCommand(<span class="stringliteral">&quot;/vis/scene/add/trajectories smooth&quot;</span>);</div>
<div class="line"><span class="lineno">   63</span>  UImanager-&gt;ApplyCommand(<span class="stringliteral">&quot;/vis/scene/endOfEventAction accumulate 1&quot;</span>);</div>
<div class="line"><span class="lineno">   64</span>  UImanager-&gt;ApplyCommand(<span class="stringliteral">&quot;/run/verbose 0&quot;</span>);</div>
<div class="line"><span class="lineno">   65</span>  UImanager-&gt;ApplyCommand(<span class="stringliteral">&quot;/tracking/verbose 0&quot;</span>);</div>
<div class="line"><span class="lineno">   66</span>  UImanager-&gt;ApplyCommand(<span class="stringliteral">&quot;/optics/verbose 0&quot;</span>);</div>
<div class="line"><span class="lineno">   67</span>  UImanager-&gt;ApplyCommand(<span class="stringliteral">&quot;/geometry/test/run&quot;</span>);</div>
<div class="line"><span class="lineno">   68</span> </div>
<div class="line"><span class="lineno">   69</span>  <span class="comment">// Configure analysis manager</span></div>
<div class="line"><span class="lineno">   70</span>  G4AnalysisManager *man = G4AnalysisManager::Instance();</div>
<div class="line"><span class="lineno">   71</span>  man-&gt;SetFileName(<span class="stringliteral">&quot;../output.root&quot;</span>);</div>
<div class="line"><span class="lineno">   72</span>  man-&gt;OpenFile(<span class="stringliteral">&quot;../output.root&quot;</span>);</div>
<div class="line"><span class="lineno">   73</span> </div>
<div class="line"><span class="lineno">   74</span>  <span class="comment">// Run simulation for &quot;runs&quot; events</span></div>
<div class="line"><span class="lineno">   75</span>  <span class="keywordtype">int</span> runs = 1000;</div>
<div class="line"><span class="lineno">   76</span>  <span class="keywordflow">if</span> (argc&gt;1){</div>
<div class="line"><span class="lineno">   77</span>    runs = std::stoi(argv[1]);</div>
<div class="line"><span class="lineno">   78</span>  }</div>
<div class="line"><span class="lineno">   79</span>  G4cout&lt;&lt; runs &lt;&lt; G4endl;</div>
<div class="line"><span class="lineno">   80</span>  <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i = 0; i&lt; runs; i++){</div>
<div class="line"><span class="lineno">   81</span>    UImanager-&gt;ApplyCommand(<span class="stringliteral">&quot;/run/beamOn 1&quot;</span>);</div>
<div class="line"><span class="lineno">   82</span>  }</div>
<div class="line"><span class="lineno">   83</span>  man-&gt;CloseFile();</div>
<div class="line"><span class="lineno">   84</span>  ui-&gt;SessionStart();</div>
<div class="line"><span class="lineno">   85</span> </div>
<div class="line"><span class="lineno">   86</span> </div>
<div class="line"><span class="lineno">   87</span>  <span class="keywordflow">return</span> 0;</div>
<div class="line"><span class="lineno">   88</span>}</div>
<div class="ttc" id="aclass_my_action_initialization_html"><div class="ttname"><a href="class_my_action_initialization.html">MyActionInitialization</a></div><div class="ttdoc">Manages the initialization of primary generator and run action.</div><div class="ttdef"><b>Definition</b> action.hh:28</div></div>
<div class="ttc" id="aclass_my_detector_construction_html"><div class="ttname"><a href="class_my_detector_construction.html">MyDetectorConstruction</a></div><div class="ttdoc">Defines the detector geometry, materials, and sensitive detectors.</div><div class="ttdef"><b>Definition</b> construction.hh:39</div></div>
<div class="ttc" id="aclass_my_physics_list_html"><div class="ttname"><a href="class_my_physics_list.html">MyPhysicsList</a></div><div class="ttdoc">Custom physics list class for defining physics processes in a Geant4 simulation.</div><div class="ttdef"><b>Definition</b> physics.hh:32</div></div>
</div><!-- fragment -->
</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.12.0
</small></address>
</div><!-- doc-content -->
</body>
</html>
